import{j as e,r as d,R as W}from"./react-753d8adb.js";import{c as J}from"./react-dom-25b65aaa.js";import{a as m}from"./axios-21b846bc.js";import{h as G}from"./moment-fbc5633a.js";import{R as Y}from"./react-quill-cc4b5b41.js";import{_ as Q}from"./react-spinners-6e073b4d.js";import{b as F,a as C,d as V,e as K,f as X,g as S}from"./react-router-e66cc88c.js";import{L as b,B as ee}from"./react-router-dom-a4b6d871.js";import{c as T}from"./zustand-e61269b4.js";import{p as se}from"./dompurify-8e338605.js";import{A as te,a as ne,C as E,B as ie,T as ae,F as re,M as le,R as U,b as ce,c as oe,d as de,e as pe}from"./react-icons-6f1fc28f.js";import{F as he,a as me,b as ue,c as ge,E as xe,d as je,R as fe,e as ve,T as Ne,f as be,W as ke,g as ye,L as we,h as Se}from"./react-share-48d2199c.js";import{k as O,Q as P}from"./react-toastify-148fc929.js";import{A as Ce}from"./react-avatar-a8a2d72d.js";import"./charenc-06700f37.js";import"./scheduler-765c72db.js";import"./lodash-d2238ea3.js";import"./quill-b60ea323.js";import"./@remix-run-8989dd9f.js";import"./use-sync-external-store-db2117ac.js";import"./classnames-e0d495a5.js";import"./clsx-1229b3e0.js";import"./@babel-dc8f0cc6.js";import"./core-js-pure-56006fd7.js";import"./prop-types-5106082e.js";import"./is-retina-be1bb70c.js";import"./md5-f7070cd1.js";import"./crypt-5ea4a8e1.js";import"./is-buffer-793dba8c.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(t){if(t.ep)return;t.ep=!0;const a=i(t);fetch(t.href,a)}})();const Re=({setFormStep:s,formStep:n})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"recipe-steps-div",children:[e.jsx("h2",{children:"Rezept eingeben"}),e.jsx("button",{style:n===0?{backgroundColor:"rgb(217, 48, 18)",color:"white"}:null,className:"steps-btn",onClick:()=>s(0),children:"1️⃣ Rezept"}),e.jsx("button",{style:n===1?{backgroundColor:"rgb(217, 48, 18)",color:"white"}:null,className:"steps-btn",onClick:()=>s(1),children:"2️⃣ Zubereitung"})]})}),_e=({formErrors:s})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"errorMessages-divs",children:[s.recipe_name&&e.jsx("span",{children:s.recipe_name}),s.recipe_preparation&&e.jsx("span",{children:s.recipe_preparation}),s.portion&&e.jsx("span",{children:s.portion})]})}),Le=({handleInputChange:s,recipe:n,setFile:i,file:l})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"recipe-name",children:[e.jsx("label",{children:"Rezeptname"}),e.jsx("input",{type:"text",placeholder:"Rezeptname",name:"recipe_name",value:n.recipe_name,id:"recipe_name",onChange:s,required:!0})]}),e.jsxs("div",{className:"img-url",children:[e.jsx("input",{style:{display:"none"},type:"file",id:"file-recipe",name:"",onChange:t=>i(t.target.files[0])}),e.jsxs("div",{className:"file-recipe-div",children:[e.jsx("p",{className:"file-recipe-text",children:"Wähle die passende Datei (JPG) auf deiner Festplatte aus"}),e.jsx("label",{htmlFor:"file-recipe",id:"file-recipe",className:"file-recipe",children:"Rezept Bild auswählen"})]})]}),e.jsxs("div",{className:"portion",children:[e.jsx("label",{children:"Portionen"}),e.jsxs("div",{className:"portion-info-div",children:[e.jsx("span",{children:"Das Rezept ist ausgelegt für"}),e.jsx("input",{min:0,type:"number",name:"portion",value:n.portion,id:"portion",onChange:s,required:!0}),e.jsx("span",{children:"Personen / Portionen."})]})]}),e.jsxs("div",{className:"dynamic-inputstitle-div",children:[e.jsx("p",{className:"menge-title",children:"Menge"}),e.jsx("p",{className:"einheit-title",children:"Einheit"}),e.jsx("p",{children:"Zutatenname"})]})]}),ze=({value:s,setValue:n})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"recipe-preparation-div",children:[e.jsx("h5",{children:"Rezeptzubereitung"}),e.jsx("p",{children:"Hier kannst du beschreiben, welche Schritte für die Zubereitung des Rezeptes notwendig sind. Bitte achte darauf, dass alle relevanten Informationen enthalten sind, z.B. Angaben zur Temperatur des Backofens und dass alle von dir aufgeführten Zutaten enthalten sind"}),e.jsx("div",{className:"editor-container",children:e.jsx(Y,{theme:"snow",value:s,onChange:n,name:"recipe_preparation",id:"recipe_preparation",className:"editor",required:!0})})]}),e.jsx("div",{className:"btns-div",children:e.jsx("button",{type:"submit",className:"handle-submit-btn",children:"Rezept einreichen"})})]}),Be=["keine Einheit","Becher","Beet/e","Beutel","Blatt","Blätter","Bund","Bündel","cl","cm","dicke","dl","Dose","dünne","Ecke(n)","Eimer","einige","einige Stiele","EL","EL gehäuft","EL gestr","etwas","evtl","extra","Fässchchen","Fläschen","Flasche","Flaschen","g","Glas","Gläser","gr. Dose/n","gr. Gläser","gr. Kopf","gr. Scheibe(n)","gr. Stück(e)","große","großen","großer","großes","halbe","Halm(e)","Handvoll","Kästchen","kg","kl. Bund","kl. Dose/n","kl. Glas","kl. Gläser","kl. Kopf","kl. Scheibe(n)","kl. Stück","kleine","kleiner","kleines","Knolle/n","Kopf","Köpfe","Körner","Kugel","Kugel/n","Kugeln","kg","Liter","m,-große","m,-großer","m,-großes","mehr","mg","ml","Msp.","n. B","Paar","Paket","Pck","Pkt","Platte/n","Port","Prise(n)","Prisen","Prozent %","Riegel","Ring/e","Rippe/n","Rispe(n)","Rolle","Schälchen","Scheibe/n","Schuss","Spritzer","Stange/n","Stängel","Staude(n)","Stick(s)","Stiel/e","Stiele","Streifen","Stück(e)","Tablette(n)","Tafel","Tafeln","Tasse","Tasse/n","Teil/e","TL","TL, gehäuft","TL, gestr","Topft","Tropfen","Tube/n","viel","wenig","Würfel","Wurzel","Wurzel/n","Zehe/n","Zweig/e"],Pe=({inputList:s,setInputList:n})=>{const i=(t,a)=>{let r=[...s];r[a][t.target.name]=t.target.value,n(r)},l=t=>{let a=[...s];a.splice(t,1),n(a)};return console.log(s),e.jsx(e.Fragment,{children:s.map((t,a)=>e.jsxs("div",{className:"dynamic-inputs-div",children:[e.jsx("input",{type:"text",value:t.quantity,name:"quantity",id:"quantity",placeholder:"Menge",onChange:r=>i(r,a)}),e.jsx("select",{name:"unit",id:"unit",onChange:r=>i(r,a),value:t.unit,className:"unity-select",children:Be.map((r,o)=>e.jsx("option",{value:r,name:"units",id:"units",children:r},o))}),e.jsx("input",{type:"text",value:t.ingredient_name,onChange:r=>i(r,a),placeholder:"Zutatenname",name:"ingredient_name",id:"ingredient_name"}),s.length>1&&e.jsx("button",{className:"remove-inputs-btn",onClick:()=>l(a),type:"button",children:"Löschen"})]},(t==null?void 0:t.ingredient_id)||a))})},Fe=()=>{const s=F(),n=s.state,i=s.search.includes("edit"),l=C(),[t,a]=d.useState(null),[r,o]=d.useState(i?n==null?void 0:n.recipe_preparation:""),[g,h]=d.useState(()=>i&&(n!=null&&n.ingredients)?n.ingredients:[{ingredient_name:"",unit:"",quantity:""}]),x=()=>{const v={ingredient_name:"",unit:"",quantity:""};h([...g,v])},[f,k]=d.useState({recipe_name:i?n.recipe.recipe_name:"",imgUrl:i?n.recipe.imgUrl:"",portion:i?n.recipe.portion:"",recipe_preparation:r,date:G(Date.now()).format("DD.MM.YYYY HH:mm")});let[u,j]=d.useState(!1);const c={display:"block",margin:"0 auto",borderColor:"red"},p=v=>{const{name:N,value:I,required:z}=v.target;k(y=>({...y,[N]:I})),z&&I.trim()===""?M(y=>({...y,[N]:Z[N]})):M(y=>({...y,[N]:""}))},L=async()=>{if(t)try{const v=new FormData;v.append("file",t);const N=await m.post("https://koch-8dbe7c0d957c.herokuapp.com/uploadrecipeimg",v,{withCredentials:!0});return console.log(N.data),N.data}catch(v){return console.log(v),""}else return f.imgUrl},A=async v=>{v.preventDefault(),j(!0);const N=await L(),z={recipe:{...f,imgUrl:N,recipe_preparation:r},inputList:g};console.log(z);try{n?await m.put(`https://koch-8dbe7c0d957c.herokuapp.com/recipes/${n.recipe.recipe_id}`,{requestData:z},{withCredentials:!0}):await m.post("https://koch-8dbe7c0d957c.herokuapp.com/addrecipe",z,{withCredentials:!0}),l("/"),j(!1)}catch(y){console.log(y)}},[_,B]=d.useState(0),[H,M]=d.useState({recipe_name:"",recipe_preparation:"",portion:""}),Z={recipe_name:"Bitte gib einen Rezeptnamen ein.",recipe_preparation:"Bitte verfasse einen Zubereitungstext.",portion:"Bitte gib die Anzahl der Portionen an, für die dein Rezept ausgelegt ist."};return e.jsx("div",{className:"forms-wrapper-container",children:u?e.jsxs("div",{className:"sweet-loading",children:[e.jsx("h3",{style:{marginBottom:"5px"},children:"Wird geladen..."}),e.jsx(Q,{color:"#ffa500",loading:u,cssOverride:c,size:150,"aria-label":"Loading Spinner","data-testid":"loader"})]}):e.jsxs("div",{className:"form-container",children:[e.jsx(Re,{formStep:_,setFormStep:B}),e.jsx("div",{className:"background-div"}),e.jsx(_e,{formErrors:H}),e.jsxs("form",{onSubmit:A,children:[_>=0&&e.jsxs("section",{className:"section-form-one",style:_===0?{display:"block"}:{display:"none",position:"absolute"},children:[e.jsx(Le,{recipe:f,handleInputChange:p,setFile:a,file:t}),e.jsx(Pe,{setInputList:h,inputList:g})]}),e.jsx("section",{className:"section-form-two",style:_===1?{display:"block"}:{display:"none"},children:e.jsx(ze,{value:r,setValue:o,setFormStep:B,handleSubmit:A})})]}),_===0&&e.jsxs("div",{className:"btns-div",children:[e.jsx("button",{className:"add-inputs-btn",onClick:x,children:"Weitere Zutaten hinzufügen"}),e.jsx("button",{onClick:()=>B(1),className:"step-btn",children:"Weiter"})]}),_===1&&e.jsx("button",{onClick:()=>B(0),className:"step-btn step-back-btn",children:"Zurück"})]})})};const $=T(s=>({searchString:"",setSearchString:n=>s({searchString:n})})),Ie=()=>{const[s,n]=d.useState([]),[i]=$(l=>[l.searchString]);return d.useEffect(()=>{(async()=>{try{const t=await m.get("https://koch-8dbe7c0d957c.herokuapp.com/recipes");n(t.data)}catch(t){console.error(t,"Error fetching the recipes")}})()},[]),e.jsx("div",{className:"recipes-wrapper-container",children:e.jsx("div",{className:"recipes-container",children:s.map(l=>i&&!l.recipe_name.toLowerCase().includes(i.toLowerCase())?null:e.jsxs("div",{className:"recipe-item-div",children:[e.jsx("div",{className:"recipe-img-div",children:e.jsx("img",{className:"recipe-img",src:l.imgUrl,alt:""})}),e.jsx("div",{className:"recipe-name-div",children:e.jsx("h4",{children:l.recipe_name})}),e.jsx("div",{className:"details-div",children:e.jsx("button",{className:"details-btn",children:e.jsx(b,{id:"link-details",to:`/recipes/${l.recipe_id}`,children:"Mehr Sehen"})})})]},l.recipe_id))})})};const R=T(s=>({currentUser:JSON.parse(localStorage.getItem("user"))||null,login:async n=>{const i=await m.post("https://koch-8dbe7c0d957c.herokuapp.com/api/login",n,{withCredentials:!0});s({currentUser:i.data}),localStorage.setItem("user",JSON.stringify(i.data))},logout:async()=>{await m.post("https://koch-8dbe7c0d957c.herokuapp.com/api/logout",null,{withCredentials:!0}),s({currentUser:null}),localStorage.removeItem("user")}})),De=({recipeId:s,setShareModal:n})=>{let i=`https://koch-8dbe7c0d957c.herokuapp.com/recipes/${s}`;return e.jsxs("div",{className:"share-modal-container",children:[e.jsxs("div",{className:"share-icons",children:[e.jsx(he,{url:i,children:e.jsx(me,{size:35})}),e.jsx(ue,{url:i,children:e.jsx(ge,{size:35})}),e.jsx(xe,{url:i,children:e.jsx(je,{size:35})}),e.jsx(fe,{url:i,children:e.jsx(ve,{size:35})}),e.jsx(Ne,{url:i,children:e.jsx(be,{size:35})}),e.jsx(ke,{url:i,children:e.jsx(ye,{size:35})}),e.jsx(we,{url:i,children:e.jsx(Se,{size:35})})]}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx(te,{size:20})})]})},Ee=()=>{const{currentUser:s}=R(c=>({currentUser:c.currentUser||null})),n=C(),l=F().pathname.split("/")[2],[t,a]=d.useState({}),[r,o]=d.useState([]),[g,h]=d.useState(!1);d.useEffect(()=>{(async()=>{try{const p=await m.get(`https://koch-8dbe7c0d957c.herokuapp.com/recipes/${l}`);a(p.data)}catch(p){console.error(p,"Error fetching the recipe data")}})()},[l]),d.useEffect(()=>{(async()=>{try{const p=await m.get(`https://koch-8dbe7c0d957c.herokuapp.com/recipes/${l}/ingredients`);o(p.data)}catch(p){console.error(p,"Error fetching the ingredients data")}})()},[]);const x=async()=>{try{const c=await m.delete(`https://koch-8dbe7c0d957c.herokuapp.com/recipes/${l}`,{withCredentials:!0});console.log(c),c.status===200&&n("/")}catch(c){console.error(c,"Error by deleting the recipe")}};let f=r.map(c=>c.ingredient_name),k=t.recipe_name;const u=()=>P("Die Zutaten sind auf deine Einkaufsliste"),j=async()=>{let c={recipeName:k,ingredientsNames:f};console.log(c);try{m.post("https://koch-8dbe7c0d957c.herokuapp.com/shoppingList",{requestData:c},{withCredentials:!0}),u()}catch(p){console.error(p,"Error by adding ingredients to shoppingList")}};return t?e.jsxs("div",{className:"detail-container-wrapper",style:{marginBottom:"2rem"},children:[e.jsxs("section",{className:"detail-container",children:[e.jsx("h1",{className:"title-detail-page",children:t.recipe_name}),e.jsx("img",{src:t.imgUrl,alt:"",className:"detail-page-img"}),e.jsxs("div",{className:"share-div",children:[e.jsx("button",{className:"btn-detail-page",onClick:()=>h(!0),children:"Teilen"}),e.jsxs("div",{className:"delete-and-edit-div",children:[s?e.jsx(b,{to:"/addrecipe?edit=2",state:{recipe:t,ingredients:r,recipe_preparation:t.recipe_preparation},children:e.jsx("button",{className:"delete-recipe-btn edit-recipe-btn",style:(s==null?void 0:s.id)==t.id?{cursor:"pointer"}:{cursor:" not-allowed",backgroundColor:"gray"},children:"Rezept bearbeiten"})}):null,s?e.jsx("button",{className:"delete-recipe-btn",onClick:x,style:s.id==t.id?{cursor:"pointer"}:{cursor:" not-allowed",backgroundColor:"gray"},children:"Rezept löschen"}):null]})]}),e.jsxs("div",{className:"ingredients-wrapper-div",children:[r.map((c,p)=>e.jsx("div",{className:"ingredients-div-container",children:e.jsxs("div",{className:p%2===0?"ingredient-item-div-active":"ingredient-item-div",children:[e.jsx("div",{className:"div-quantity",children:c.quantity}),e.jsx("div",{className:"div-unit",children:c.unit}),e.jsx("div",{className:"p-ingredient-name",children:c.ingredient_name})]})},c.ingredient_id)),e.jsx("button",{className:"btn-detail-page",onClick:j,children:"Auf die Einkaufsliste setzen"})]}),e.jsxs("section",{className:"detail-container-section-two",children:[e.jsx("h1",{className:"second-section-detail-title",children:"Zubereitung"}),e.jsx("p",{dangerouslySetInnerHTML:{__html:se.sanitize(t.recipe_preparation)}})]}),e.jsxs("section",{className:"detail-container-section-three",children:[e.jsx("h1",{className:"second-section-detail-title",children:"Rezept von"}),e.jsxs("div",{className:"user-info-container",children:[e.jsx("img",{src:t.user_img,alt:""}),e.jsx("p",{className:"username-info",children:t.firstname+" "+t.lastname}),e.jsxs("p",{className:"recipe-date-info",children:["Erstellt am ",t.date]})]})]}),g?e.jsx(De,{recipeId:l,setShareModal:h}):null]}),e.jsx(O,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]}):e.jsx("div",{children:"Loading..."})};const Ae=({setToggle:s,currentUser:n})=>{const i=C(),{logout:l}=R(a=>a),t=async()=>{try{s(!1),await l(),i("/")}catch(a){console.log(a)}};return e.jsxs("nav",{className:"navbar-container",children:[e.jsxs("div",{className:"profile nav-item",children:[e.jsx(ne,{}),e.jsx(b,{to:"/",className:"nav-link",onClick:()=>s(!1),children:"Home"})]}),e.jsxs("div",{className:"profile nav-item",children:[e.jsx(E,{}),e.jsx(b,{to:`/profile/${n.id}`,className:"nav-link",onClick:()=>s(!1),children:"Mein Profil"})]}),e.jsxs("div",{className:"profile nav-item",children:[e.jsx(ie,{size:20}),e.jsx(b,{to:`/shoppingList/${n.id}`,className:"nav-link",onClick:()=>s(!1),children:"Meine Einkaufsliste"})]}),e.jsxs("div",{className:"add-recipe-nav nav-item",children:[e.jsx(ae,{}),e.jsx(b,{to:"/addrecipe",className:"nav-link",onClick:()=>s(!1),children:"Rezept eingeben"})]}),e.jsxs("div",{className:"login-logout-nav nav-item",children:[e.jsx(re,{}),e.jsx("span",{className:"nav-link",onClick:t,children:"Ausloggen"})]})]})},Me=()=>{const{currentUser:s}=R(o=>({currentUser:o.currentUser||null})),[n,i]=$(o=>[o.searchString,o.setSearchString]),[l,t]=d.useState(!1),a=C(),r=F();return e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"logo",children:e.jsx(b,{to:"/",style:{color:"inherit"},children:e.jsx("h1",{children:"Koch"})})}),e.jsx("div",{className:"search-bar",children:r.pathname==="/"?e.jsx("input",{type:"text",className:"search-bar",placeholder:"z.B Pfannkuchen, Lasagne, Low Carb",value:n,onChange:o=>i(o.target.value)}):null}),e.jsx("div",{className:"avatar",children:s===null?e.jsx("button",{className:"login-btn",onClick:()=>a("/login"),style:r.pathname==="/login"?{display:"none"}:{display:"block"},children:"Anmelden"}):e.jsxs("div",{children:[e.jsx(Ce,{className:"profile-avatar",name:`${s.firstname} ${s.lastname}`,size:"40",onClick:()=>t(!l)}),l?e.jsx(Ae,{setToggle:t,currentUser:s}):null]})})]})};const Ue=({deletemodal:s,setDeleteModal:n})=>{const{logout:i}=R(a=>a),l=C(),t=async()=>{try{await m.delete("https://koch-8dbe7c0d957c.herokuapp.com/deleteuser",{withCredentials:!0}),await i(),l("/")}catch(a){console.log(a)}};return e.jsxs("div",{className:"delete-modal-container",style:s?{top:"40%"}:{top:"-20rem"},children:[e.jsx("h3",{children:"Sind Sie sicher, dass Sie Ihr Konto löschen wollen?😭"}),e.jsx("button",{className:"ja-btn",onClick:t,children:"Ja"}),e.jsx("button",{className:"nein-btn",onClick:()=>n(!1),children:"Nein"})]})},Ke=()=>{const{userId:s}=V(),[n,i]=d.useState(null),[l,t]=d.useState(null),[a,r]=d.useState(null),[o,g]=d.useState([]),[h,x]=d.useState(!1),f=async c=>{c.preventDefault();const p=await k();try{await m.put("https://koch-8dbe7c0d957c.herokuapp.com/updateuserprofileimg",{img:a?p:""},{withCredentials:!0}),window.location.reload()}catch(L){console.log(L)}},k=async()=>{try{const c=new FormData;c.append("file",a);const p=await m.post("https://koch-8dbe7c0d957c.herokuapp.com/uploaduserprofileimg",c);return console.log(p.data),p.data}catch(c){console.log(c),w}};if(d.useEffect(()=>{s&&(async()=>{try{const p=await m.get(`https://koch-8dbe7c0d957c.herokuapp.com/api/usersbyid/${s}`,{withCredentials:!0});t(p.data);const L=await m.get(`https://koch-8dbe7c0d957c.herokuapp.com/recipesbyuserid/${s}`,{withCredentials:!0});g(L.data)}catch(p){i(p.response.data),console.log(p.response.data)}})()},[s]),!l&&n)return e.jsx("h1",{children:n});if(!l)return e.jsx("h1",{children:"Loading..."});const u=l||null,j=o||null;return e.jsxs("div",{className:"profile-page-wrapper",children:[e.jsxs("div",{className:"profile-page-container",children:[e.jsxs("section",{className:"profile-first-section",children:[e.jsx("img",{src:u.img,alt:"",className:"user-profile-img"}),e.jsx("h1",{children:u.firstname+" "+u.lastname}),e.jsx("input",{style:{display:"none"},type:"file",id:"file",name:"file",onChange:c=>r(c.target.files[0])}),e.jsxs("div",{className:"upload-file-div",children:[e.jsx("label",{className:"file",htmlFor:"file",id:"file",children:"Bild auswählen"}),e.jsx("button",{onClick:f,id:"file",children:"Bild hochladen"})]}),e.jsx("p",{className:"profile-id",children:u.id})]}),e.jsxs("section",{className:"profile-second-section",children:[e.jsxs("p",{children:["Email: ",u.email]})," ",e.jsx("div",{className:"delete-account-btn",onClick:()=>x(!h),children:"Konto löschen"})]}),e.jsxs("section",{className:"profile-third-section",children:[e.jsx("h3",{children:"Meine Rezepte:"}),j.map(c=>e.jsxs("div",{className:"recipe-per-userId-div",children:[e.jsx("img",{src:c.imgUrl,alt:""}),e.jsxs("div",{children:[e.jsx(b,{to:`http://localhost:5173/recipes/${c.recipe_id}`,style:{color:"inherit"},children:e.jsx("h3",{children:c.recipe_name})}),e.jsx("p",{children:c.date})]})]},c.recipe_id))]})]}),e.jsx(Ue,{deletemodal:h,setDeleteModal:x})]})};const q=({title:s,emailPlaceholder:n,passwordPlaceholder:i,buttonText:l,linkText:t,linkTo:a,handleInputChange:r,handleSubmit:o,setPassword:g})=>e.jsx("div",{className:"login-wrapper",children:e.jsx("div",{className:"login-container",children:e.jsxs("form",{className:"login-form",onSubmit:o,children:[e.jsx("div",{className:"filter-div"}),e.jsx("h1",{className:"login-title",children:"Koch"}),e.jsx("h3",{className:"login-subtitle",children:s}),s==="Neues Konto erstellen"&&e.jsxs("div",{className:"email-div",children:[e.jsx(E,{className:"email-icon-login"}),e.jsx("input",{type:"text",placeholder:"Vorname",name:"firstname",id:"firstname",onChange:r})]}),s==="Neues Konto erstellen"&&e.jsxs("div",{className:"email-div",children:[e.jsx(E,{className:"email-icon-login"}),e.jsx("input",{type:"text",placeholder:"Nachname",name:"lastname",id:"lastname",onChange:r})]}),e.jsxs("div",{className:"email-div",children:[e.jsx(le,{className:"email-icon-login"}),e.jsx("input",{type:"email",placeholder:n,name:"email",id:"email",onChange:r})]}),e.jsxs("div",{className:"password-div",children:[e.jsx(U,{className:"password-icon-login"}),e.jsx("input",{type:"password",placeholder:i,name:"password",id:"password",onChange:r,autoComplete:"off"})]}),s==="Neues Konto erstellen"&&e.jsxs("div",{className:"password-div",children:[e.jsx(U,{className:"password-icon-login"}),e.jsx("input",{type:"password",placeholder:"Bestätigen das Passwort",name:"confirmPassword",id:"confirmPassword",onChange:h=>g({confirmPassword:h.target.value}),autoComplete:"off"})]}),e.jsx("button",{className:"login-page-btn",type:"submit",children:l}),e.jsx("span",{className:"loginlink",children:t}),e.jsx(b,{to:a,className:"login-link",children:s==="Jetzt einloggen"?"Neues Konto erstellen":"Jetzt einloggen"}),e.jsx(O,{})]})})}),Te=()=>{const{login:s}=R(h=>h),n=C(),[i,l]=d.useState(null),[t,a]=d.useState({email:"",password:""}),r=h=>{a(x=>({...x,[h.target.name]:h.target.value}))},o=()=>P.error(i,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}),g=async h=>{h.preventDefault();try{await s(t),n("/")}catch(x){console.log(x),l(x.response.data),o()}};return e.jsx(q,{title:"Jetzt einloggen",subtitle:"Jetzt einloggen",emailPlaceholder:"Email",passwordPlaceholder:"Passwort",buttonText:"Einloggen",linkText:"Du hast noch kein Koch-Konto?",linkTo:"/register",handleInputChange:r,handleSubmit:g})},Oe=()=>{const s=C(),[n,i]=d.useState(null),[l,t]=d.useState(null),[a,r]=d.useState({confirmPassword:""}),[o,g]=d.useState({firstname:"",lastname:"",email:"",password:""}),h=u=>{g(j=>({...j,[u.target.name]:u.target.value}))},x=()=>P(l),f=()=>P(n);console.log(a);const k=async u=>{u.preventDefault();try{if(o.firstname.length!=0&&o.lastname.length!=0&&o.email.length!=0&&o.password.length>=8&&o.password===a.confirmPassword){const j=await m.post("https://koch-8dbe7c0d957c.herokuapp.com//api/register",o,{withCredentials:!0});s("/login"),t(j.data)}else o.password.length<8?(i("Das Passwort muss mindestens 8 Zeichen lang sein."),f()):o.firstname.length===0||o.lastname.length===0||o.email.length===0?(i("Bitte füllen Sie die Felder vollständig aus."),f()):o.password!==a.confirmPassword&&(i("Die Passwörter stimmen nicht überein"),f());x()}catch(j){console.log(j)}};return e.jsx(q,{title:"Neues Konto erstellen",emailPlaceholder:"Email",passwordPlaceholder:"Passwort",buttonText:"Konto erstellen",linkText:"Du hast bereits ein Koch-Konto?",linkTo:"/login",handleInputChange:h,handleSubmit:k,error:n,success:l,setPassword:r})},D=({children:s})=>{const{currentUser:n}=R(i=>({currentUser:i.currentUser||null}));return n===void 0?null:n?s:e.jsx(K,{to:"/"})},$e=({children:s})=>{const{currentUser:n}=R(i=>({currentUser:i.currentUser||null}));return n?e.jsx(K,{to:"/"}):s},qe=({item:s,isActiveSection:n,setActiveIndex:i,sectionIndex:l})=>{const t=()=>{i(n?null:l)},a=async r=>{try{await m.delete("https://koch-8dbe7c0d957c.herokuapp.com/deleteshoppinglistbyid",{data:{id:r}}),window.location.reload()}catch(o){console.log(o)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"shoppinglist-title",children:[e.jsx("h4",{children:s.sl_recipe_name}),n?e.jsx(ce,{className:"shoppinglist-arrow-icon",size:22,onClick:t}):e.jsx(oe,{className:"shoppinglist-arrow-icon",size:20,onClick:t}),e.jsx("span",{type:"button",className:"delete-item-shoppinglist",onClick:()=>a(s.shoppingList_id),children:e.jsx(de,{})})]}),n&&e.jsxs("div",{className:"shoppinglist-list",children:[e.jsx("ul",{children:JSON.parse(s.ingredients_names).map((r,o)=>e.jsx("li",{children:r},o))}),e.jsx("span",{type:"button",className:"delete-item-shoppinglist-mobile",onClick:()=>a(s.shoppingList_id),children:"Löschen"})]})]})},He=()=>{const[s,n]=d.useState(null),[i,l]=d.useState([]);d.useEffect(()=>{(async()=>{try{const r=await m.get("https://koch-8dbe7c0d957c.herokuapp.com/getshoppinglistinfo",{withCredentials:!0});l(r.data)}catch(r){console.log(r)}})()},[]);let t=i||null;return e.jsx(e.Fragment,{children:i==null||i.length==0?e.jsx("h3",{children:"Deine Einkaufsliste is leer 😥"}):t.map((a,r)=>e.jsx("div",{className:"shoppingliste-info-div",children:e.jsx(qe,{item:a,isActiveSection:s===r,setActiveIndex:n,activeIndex:s,sectionIndex:r},a.shoppingList_id)},r))})};const Ze=()=>e.jsx("div",{className:"shoppinglist-wrapper",children:e.jsxs("div",{className:"shoppinglist-container",children:[e.jsx("h2",{children:"Meine Einkaufsliste:"}),e.jsx(He,{})]})});const We=()=>e.jsxs("footer",{children:[e.jsx("h4",{children:"Made with love, React, Node, Express and MySQL."}),e.jsx("h4",{children:"Developed and designed by Caio Melo."}),e.jsxs("div",{className:"footer-div",children:[e.jsx("span",{children:"Find me on: "}),e.jsx("a",{href:"https://github.com/caiomelotec?tab=repositories",children:e.jsx(pe,{size:30,color:"black"})})]})]});function Je(){let s=F();return e.jsxs("div",{className:"App",children:[e.jsx(Me,{}),e.jsx("div",{className:"content",children:e.jsxs(X,{children:[e.jsx(S,{path:"/",element:e.jsx(Ie,{})}),e.jsx(S,{path:"/recipes/:id",element:e.jsx(Ee,{})}),e.jsx(S,{path:"/addrecipe",element:e.jsxs(D,{children:[e.jsx(Fe,{})," "]})}),e.jsx(S,{path:"/profile/:userId",element:e.jsx(D,{children:e.jsx(Ke,{})})}),e.jsx(S,{path:"/shoppingList/:userId",element:e.jsx(D,{children:e.jsx(Ze,{})})}),e.jsx(S,{path:"/login",element:e.jsx($e,{children:e.jsx(Te,{})})}),e.jsx(S,{path:"/register",element:e.jsx(Oe,{})})]})}),s.pathname==="/"||s.pathname==="/register"||s.pathname==="/login"?e.jsx(We,{}):null]})}J.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(ee,{children:e.jsx(Je,{})})}));
